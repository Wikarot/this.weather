(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{49:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(6),i=a(12),s=a(13),c=a(15),l=a(14),d=a(2),m=a(16),u=a(0),p=a.n(u),h=a(5),f=a(43),g=a.n(f),b=a(45),_=a.n(b),w=a(19),y=a(9);function v(e){var t=[];return void 0!==e.iconClasses&&t.push.apply(t,Object(w.a)(e.iconClasses)),p.a.createElement("div",{className:"custom_radio_container"},p.a.createElement("input",{id:"custom_radio_"+e.idWord,className:"custom_radio",name:e.groupWord+"_radio_group",type:"radio",defaultChecked:e.defaultChk}),p.a.createElement("label",{className:"custom_radio_lbl icon_small",title:e.titleWord,htmlFor:"custom_radio_"+e.idWord}),p.a.createElement(y.a,{name:e.iconWord,classes:[].concat(t)}))}function E(e){var t=[],a=["custom_chk_container","btn"];return void 0!==e.iconWordB?(a.push("dual_icon"),t.push("perma_active")):a.push("single_icon"),void 0!==e.iconClasses&&t.push.apply(t,Object(w.a)(e.iconClasses)),p.a.createElement("div",{className:a.join(" ")},p.a.createElement("input",{id:"custom_chk_"+e.idWord,className:"custom_chk",type:"checkbox",defaultChecked:e.defaultChk}),p.a.createElement("label",{className:"custom_chk_lbl",title:e.titleWord,htmlFor:"custom_chk_"+e.idWord}),p.a.createElement(y.a,{name:e.iconWordA,classes:[].concat(t)}),void 0!==e.iconWordB?p.a.createElement(y.a,{name:e.iconWordB,classes:[].concat(t)}):null)}var k=a(7),x=a(4),W=new Worker("mercatorToEquirectangular.js"),C={base:"https://tile.openweathermap.org/map/",last1:".png?appid=b280c897878592322aafe56701248929",last2:".png?appid=cdd659df7dc048884575b9451ddf1330"},O=["clouds_new","precipitation_new","pressure_new","wind_new","temp_new"],I=1.006,j=2,M=k.c/j,R=new h.s(k.d,64,64);R.rotateY(h.k.degToRad(-90));var A=new h.a(16777215,.015),B=new h.d(16777215,.78),S=[[void 0,void 0],[void 0,void 0],[void 0,void 0],[void 0,void 0],[void 0,void 0]];function L(){return P.apply(this,arguments)}function P(){return(P=Object(o.a)(r.a.mark(function e(){var t,a,n,o,i,s,c,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=(new h.t).load("/this.weather/images/texture-512.png"),a=(new h.t).load("/this.weather/images/spec-512.png"),n=(new h.t).load("/this.weather/images/bump-512.jpg"),t.encoding=h.w,a.encoding=h.w,n.encoding=h.w,k.g.fog=new h.g(7651583,k.e-.82*k.d,k.e),G(B),(o=new h.m).geometry=R,o.material=new h.o({map:t,specularMap:a,specular:new h.c(1710618),shininess:55,bumpMap:n,bumpScale:.008}),o.matrixAutoUpdate=!1,i=0;i<5;i++)S[i][0]=document.getElementById("weather_map_"+i).getContext("2d"),S[i][1]=new h.o,(s=new h.b(S[i][0].canvas)).encoding=h.w,S[i][1].map=s,S[i][1].shininess=0,S[i][1].transparent=!0,(c=new h.m(R,S[i][1])).layers.set(i+1),c.scale.multiplyScalar(I),c.matrixAutoUpdate=!1,A.layers.enable(i+1),B.layers.enable(i+1),k.g.add(c);(l=new h.m).geometry=R,l.material=new h.o({color:16777215,side:h.e,transparent:!0,opacity:.05,shininess:0}),l.scale.multiplyScalar(.9*I),l.matrixAutoUpdate=!1,k.g.add(o,l,A,B),setInterval(N,18e4),Object(k.j)();case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function N(){G(B)}function G(e){var t,a=(new Date).getUTCHours(),n=(new Date).getUTCMonth(),r=new h.l,o=0;o=n<=6?-8*n+24:8*n-72,t=180-a/24*360,r.makeRotationFromEuler(new h.f(h.k.degToRad(o),h.k.degToRad(t),0,"YXZ")),e.position.set(0,0,10*k.e),e.position.applyMatrix4(r),e.lookAt(0,0,0)}function z(e){var t=document.createElement("canvas");t.width=k.c,t.height=k.c;var a=t.getContext("2d"),n=0,i=new Image(M,M),s=new Image(M,M),c=new Image(M,M),l=new Image(M,M);function d(e,t,a){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(r.a.mark(function t(o,i,s){var c,l,d,m,u,p,h,f,g,b,_,w;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a.drawImage(o,i,s),c=a.getImageData(i,s,M,M),l=c.data.length,0===e)for(d=0;d<l;d+=4)m=((m=c.data[d+3])-153)/.4,c.data[d+0]=255,c.data[d+1]=255,c.data[d+2]=255,c.data[d+3]=1.8*m;else if(1===e)for(u=0;u<l;u+=4)c.data[u+0]=255,c.data[u+1]=255,c.data[u+2]=255,c.data[u+3]*=1.8;else if(2===e)for(p=0;p<l;p+=4)c.data[p+3]*=1.5;else if(3===e)for(h=0;h<l;h+=4)f=c.data[h+0],g=c.data[h+1],c.data[h+0]=255-.75*g,c.data[h+1]=255-.75*f,c.data[h+2]=0,c.data[h+3]*=1.5;else if(4===e)for(b=0;b<l;b+=4)c.data[b+3]*=1.8;if(a.putImageData(c,i,s),++n===j*j)for(_=0;_<k.c;_++)w=a.getImageData(0,_,k.c,1),W.postMessage([w,_,k.c,k.c/2,e]);case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}i.crossOrigin="Anonymous",s.crossOrigin="Anonymous",c.crossOrigin="Anonymous",l.crossOrigin="Anonymous",i.src=C.base+O[e]+"/1/0/0"+C.last1,s.src=C.base+O[e]+"/1/1/0"+C.last1,c.src=C.base+O[e]+"/1/0/1"+C.last2,l.src=C.base+O[e]+"/1/1/1"+C.last2,i.onload=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(i,0*M,0*M);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),s.onload=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(s,1*M,0*M);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),c.onload=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(c,0*M,1*M);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),l.onload=Object(o.a)(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(l,1*M,1*M);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))}var D=0;W.onmessage=function(e){var t=e.data[0];e.data[1].forEach(function(){var e=Object(o.a)(r.a.mark(function e(a){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S[t][0].putImageData(a.content,0,a.newY);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),Object(x.b)('Mapa equirectangular "'+O[t]+'": Creado...'),S[t][1].map.needsUpdate=!0,0===t&&document.getElementById("map_canvas").getContext("2d").putImageData(S[0][0].getImageData(0,0,k.c,.5*k.c),0,0),5===++D&&Object(x.e)("Mapas equirectangulares: Finalizados (5 de 5)")},a.d(t,"default",function(){return J});var F,T,U,q=new h.u,X=new h.q,Y=[{id:0,label:"Terreno",ref:[""],icon:"terrain"},{id:1,label:"Nubosidad",ref:["0%","100%"],icon:"cloud"},{id:2,label:"Precipitaci\xf3n",ref:["0mm","200mm"],icon:"precipitation"},{id:3,label:"Presi\xf3n",ref:["950hPa","1070hPa"],icon:"tachometer"},{id:4,label:"Viento",ref:["0m/s","200m/s"],icon:"wind"},{id:5,label:"Temperatura",ref:["-40\xb0C","0\xb0C","40\xb0C"],icon:"thermometer"}],Z=1,H=window.matchMedia("(max-width: 679px)"),J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={option:Z,label:Y[Z].label,ref:Y[Z].ref,showContent:"inline-block",showGlobe:"flex",showMap:"none"},a.setGlobe=a.setGlobe.bind(Object(d.a)(a)),a.setMap=a.setMap.bind(Object(d.a)(a)),a.setWeatherOption=a.setWeatherOption.bind(Object(d.a)(a)),a.animateRaf=0,a.labelsRaf=0,a.animate=a.animate.bind(Object(d.a)(a)),a.setCameraPosition=a.setCameraPosition.bind(Object(d.a)(a)),a.toggleLights=a.toggleLights.bind(Object(d.a)(a)),a.toggleRotation=a.toggleRotation.bind(Object(d.a)(a)),a.resetRedererSize=a.resetRedererSize.bind(Object(d.a)(a)),a.updateLabels=a.updateLabels.bind(Object(d.a)(a)),a.mapCanvas=void 0,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t,a,n,o=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(k.h){e.next=21;break}return e.next=3,L();case 3:for(t=0;t<0;t++)z(t);(F=new h.p(45,k.c/k.c,k.b,k.a)).layers.enable(Z),(T=new h.v({antialias:!0,alpha:!0,powerPreference:"high-performance",stencil:!1})).setSize(k.c,k.c),T.setPixelRatio(2),T.gammaFactor=2.2,T.gammaOutput=!0,T.domElement.id="globe_canvas",(U=new g.a(F,T.domElement)).rotateSpeed=.3,U.autoRotate=!1,U.autoRotateSpeed=2,U.enablePan=!1,U.enableZoom=!1,U.enableKeys=!1,U.minPolarAngle=Math.PI-.9*Math.PI,U.maxPolarAngle=.9*Math.PI;case 21:for(document.getElementById("globe_box").appendChild(T.domElement),document.getElementById("weather_maps_body").style.overflowX="visible",this.mapCanvas=document.getElementById("map_canvas"),this.setCameraPosition(0,0),this.resetRedererSize(),this.animate(),k.f.forEach(function(e){return e.label=document.getElementById("city_label_"+e.id)}),this.updateLabels(),a=function(e){document.getElementById("custom_radio_"+e).addEventListener("change",function(){o.setWeatherOption(e)})},n=0;n<6;n++)a(n);document.getElementById("custom_radio_globe_radio").addEventListener("change",function(){o.setGlobe()}),document.getElementById("custom_radio_map_radio").addEventListener("change",function(){o.setMap()}),document.getElementById("custom_chk_rotation_chk").addEventListener("change",function(e){o.toggleRotation(e)}),document.getElementById("custom_chk_day_night_day_chk").addEventListener("change",function(e){o.toggleLights(e)}),document.getElementById("weather_maps_body").addEventListener("scroll",function(e){var t=H.matches?512:1024,a=1+(H.matches?7:14),n=.5*(t+2*a)+a,r=e.target.scrollLeft/n;document.getElementById("mark_left").style.width=32*r+"px",document.getElementById("mark_right").style.width=32-32*r+"px"}),H.addListener(this.resetRedererSize),_.a.reset();case 38:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.animateRaf),cancelAnimationFrame(this.labelsRaf)}},{key:"setGlobe",value:function(){document.getElementById("weather_maps_body").style.overflowX="visible","flex"!==this.state.showGlobe&&this.setState({showMap:"none",showGlobe:"flex"})}},{key:"setMap",value:function(){document.getElementById("weather_maps_body").style.overflowX="hidden","flex"!==this.state.showMAp&&this.setState({showGlobe:"none",showMap:"flex"})}},{key:"setWeatherOption",value:function(e){this.setState({option:e,label:Y[e].label,ref:Y[e].ref});var t=1;do{e===Y[t].id?F.layers.enable(t):F.layers.disable(t),t++}while(t<6);0===e?this.mapCanvas.getContext("2d").clearRect(0,0,k.c,.5*k.c):this.mapCanvas.getContext("2d").putImageData(S[e-1][0].getImageData(0,0,k.c,.5*k.c),0,0)}},{key:"animate",value:function(){this.animateRaf=requestAnimationFrame(this.animate),U.update(),T.render(k.g,F)}},{key:"setCameraPosition",value:function(e,t){var a=new h.l;a.makeRotationFromEuler(new h.f(e,t,0,"YXZ")),F.position.set(0,0,k.e).applyMatrix4(a),F.lookAt(0,0,0)}},{key:"toggleLights",value:function(e){!0===e.target.checked?(A.intensity=.78,B.intensity=0):(A.intensity=.015,B.intensity=.78)}},{key:"toggleRotation",value:function(e){U.autoRotate=e.target.checked}},{key:"resetRedererSize",value:function(){var e=T.getSize.x;H.matches&&e!==.5*k.c?T.setSize(.5*k.c,.5*k.c):H.matches||e===k.c||T.setSize(k.c,k.c)}},{key:"updateLabels",value:function(){var e=this;this.labelsRaf=requestAnimationFrame(this.updateLabels);var t=T.domElement.clientWidth,a=T.domElement.clientHeight;k.f.forEach(function(n){var r=n.label,o=n.dot,i=n.x,s=n.y;if("flex"===e.state.showGlobe){o.updateWorldMatrix(!0,!1),o.getWorldPosition(q),q.project(F),X.setFromCamera(q,F);var c=(.5*q.x+.5)*t,l=(-.5*q.y+.5)*a;r.style.transform="translate(-50%, -50%) translate("+Math.round(c)+"px, "+Math.round(l)+"px)",q.z>.8?r.style.display="none":r.style.display=""}else r.style.display="",H.matches||(i*=2,s*=2),r.style.transform="translate(-50%, -50%) translate("+Math.round(i)+"px, "+Math.round(s)+"px)"})}},{key:"render",value:function(){return p.a.createElement("div",{id:"weather_maps_box"},p.a.createElement("article",{id:"weather_maps"},p.a.createElement("div",{id:"weather_maps_header"},p.a.createElement("h3",null,p.a.createElement("em",null,this.state.label)),p.a.createElement(v,{idWord:"globe_radio",iconWord:"globe",groupWord:"weather_maps",titleWord:"Globo",defaultChk:!0,key:"custom_radio_key_globe_radio"}),p.a.createElement(v,{idWord:"map_radio",iconWord:"map",groupWord:"weather_maps",titleWord:"Mapa",defaultChk:!1,key:"custom_radio_key_map_radio"})),p.a.createElement("hr",null),p.a.createElement("div",{id:"weather_maps_body",className:"dragscroll"},p.a.createElement("div",{id:"globe_box",style:{display:this.state.showGlobe}},p.a.createElement("div",{id:"globe_shadow"},p.a.createElement("span",null))),p.a.createElement("div",{id:"map_box",style:{display:this.state.showMap}},p.a.createElement("div",{id:"map_canvas_container"},p.a.createElement("canvas",{id:"map_canvas",width:k.c,height:.5*k.c}))),p.a.createElement("div",{id:"labels"},k.f.map(function(e){return p.a.createElement(K,{id:e.id,cityName:e.cityName,key:"city_label_"+e.id})}))),p.a.createElement("hr",null),p.a.createElement("div",{id:"ref"},p.a.createElement("div",{id:"ref_data"},Y[this.state.option].ref.map(function(e){return p.a.createElement("p",{key:"ref_data_"+e},e)})),p.a.createElement("hr",null),p.a.createElement("div",{id:"ref_gradient_bg"}),p.a.createElement("div",{className:"ref_gradient ref_gradient_"+Y[this.state.option].id})),p.a.createElement("hr",null),p.a.createElement("div",{id:"weather_maps_control"},p.a.createElement("div",{id:"globe_controls",style:{display:this.state.showGlobe}},p.a.createElement(E,{idWord:"rotation_chk",iconWordA:"rotation_360",titleWord:"Alternar rotaci\xf3n",defaultChk:!1}),p.a.createElement(E,{idWord:"day_night_day_chk",iconWordA:"day_night",iconWordB:"day",titleWord:"Alternar iluminaci\xf3n",defaultChk:!1})),p.a.createElement("div",{id:"generic_controls"},Y.map(function(e){return p.a.createElement(v,{idWord:String(e.id),iconWord:e.icon,groupWord:"map_option",titleWord:e.label,defaultChk:1===e.id,key:"custom_radio_key_"+e.id})}))),p.a.createElement("div",{id:"mark_box",style:{display:this.state.showMap}},p.a.createElement("div",{id:"mark_content"},p.a.createElement("div",{id:"mark_left"}),p.a.createElement("div",{id:"mark_right"})))))}}]),t}(u.Component);function K(e){return p.a.createElement("div",{id:"city_label_"+e.id,className:"city_label"},e.cityName)}}}]);
//# sourceMappingURL=WeatherMaps.1ee18e05.chunk.js.map