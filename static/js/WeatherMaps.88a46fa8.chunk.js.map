{"version":3,"sources":["../node_modules/orbit-controls-es6/build/orbit-controls-es6.umd.js","components/CustomRadio.js","components/CustomChk.js","js/threeStuff.js","components/WeatherMaps.js"],"names":["module","exports","three","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","p","_assertThisInitialized","self","ReferenceError","_EventDispatcher","OrbitControls","object","domElement","_this","call","instance","Constructor","TypeError","_classCallCheck","this","undefined","document","enabled","Vector3","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ORBIT","MOUSE","ZOOM","MIDDLE","PAN","target0","clone","position0","position","zoom0","zoom","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","reset","scope","copy","updateProjectionMatrix","dispatchEvent","changeEvent","update","state","STATE","NONE","offset","quat","Quaternion","setFromUnitVectors","up","quatInverse","inverse","lastPosition","lastQuaternion","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","max","min","makeSafe","radius","scale","add","panOffset","setFromSpherical","lookAt","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onMouseDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","onMouseMove","onMouseUp","window","onKeyDown","type","startEvent","endEvent","ROTATE","DOLLY","TOUCH_ROTATE","TOUCH_DOLLY","TOUCH_PAN","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","multiplyScalar","panUp","pan","deltaX","deltaY","element","body","isPerspectiveCamera","targetDistance","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","console","warn","dollyIn","dollyScale","dollyOut","event","preventDefault","button","clientX","clientY","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","addEventListener","subVectors","x","y","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","stopPropagation","handleMouseWheel","keyCode","handleKeyDown","touches","pageX","pageY","handleTouchStartRotate","dx","dy","sqrt","handleTouchStartDolly","handleTouchStartPan","handleTouchMoveRotate","handleTouchMoveDolly","handleTouchMovePan","protoProps","staticProps","subClass","superClass","prototype","create","constructor","value","_inherits","get","EventDispatcher","factory","require","CustomRadio","iconClasses","push","className","id","idWord","name","groupWord","defaultChecked","defaultChk","title","titleWord","htmlFor","Icon","iconWord","classes","CustomChk","customChkClasses","iconWordB","join","iconWordA","merToEqrWorker","Worker","URL","MAP","T_SIZE","RES","BASE_SPH_GEO","SphereBufferGeometry","SPH_RAD","rotateY","THREE_MATH","degToRad","AMB","AmbientLight","SUN","DirectionalLight","WEATHER_CTX_MAT","init","a","TEXTURE","TextureLoader","load","SPECULAR","BUMP","encoding","sRGBEncoding","SCENE","fog","Fog","Z_OFF","setSunPosition","PHYS","Mesh","geometry","material","MeshPhongMaterial","map","specularMap","specular","Color","shininess","bumpMap","bumpScale","matrixAutoUpdate","getElementById","getContext","AUX","CanvasTexture","canvas","transparent","WEATHER","layers","enable","ATMO","color","side","DoubleSide","opacity","SPH_SCALE","setInterval","updateSunPosition","setInitDone","sun","rotY","HH","Date","getUTCHours","MM","getUTCMonth","MATRIX","Matrix4","rotX","makeRotationFromEuler","Euler","applyMatrix4","createWeatherMap","MERCATOR_CANVAS","createElement","width","height","MERCATOR_CTX","cont","X00","Image","X10","X01","X11","drawMapTiles","img","drawImage","T_DATA","getImageData","L","data","A","R","G","putImageData","T","LINE","postMessage","crossOrigin","src","onload","messageCount","onmessage","e","I","forEach","merY","content","newY","dbg","needsUpdate","suc","camera","renderer","controls","VEC","RAY_CASTER","Raycaster","MAPS","label","ref","icon","SMALL_MEDIA","matchMedia","WeatherMaps","option","showContent","showGlobe","showMap","setGlobe","bind","setMap","setWeatherOption","animateRaf","labelsRaf","animate","setCameraPosition","toggleLights","toggleRotation","resetRedererSize","updateLabels","mapCanvas","initDone","N_MAPS_TO_LOAD","PerspectiveCamera","NEAR","FAR","WebGLRenderer","antialias","alpha","powerPreference","stencil","setSize","setPixelRatio","gammaFactor","gammaOutput","appendChild","city_labels","item","W","matches","OFFSET","SCROLLABLE","SCROLLED","scrollLeft","style","addListener","cancelAnimationFrame","overflowX","setState","showMAp","disable","clearRect","requestAnimationFrame","render","checked","intensity","currentSize","getSize","H","updateWorldMatrix","getWorldPosition","project","setFromCamera","VEC_X","VEC_Y","transform","round","z","display","Label","cityName","String","Component"],"mappings":"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","file":"static/js/WeatherMaps.88a46fa8.chunk.js","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('three')) :\n  typeof define === 'function' && define.amd ? define(['three'], factory) :\n  (global.orbitControls = factory(global.three));\n}(this, (function (three) { 'use strict';\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (typeof call === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  /**\n   * @author qiao / https://github.com/qiao\n   * @author mrdoob / http://mrdoob.com\n   * @author alteredq / http://alteredqualia.com/\n   * @author WestLangley / http://github.com/WestLangley\n   * @author erich666 / http://erichaines.com\n   */\n\n  var OrbitControls =\n  /*#__PURE__*/\n  function (_EventDispatcher) {\n    _inherits(OrbitControls, _EventDispatcher);\n\n    function OrbitControls(object, domElement) {\n      var _this;\n\n      _classCallCheck(this, OrbitControls);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(OrbitControls).call(this));\n      _this.object = object;\n      _this.domElement = domElement !== undefined ? domElement : document; // Set to false to disable this control\n\n      _this.enabled = true; // \"target\" sets the location of focus, where the object orbits around\n\n      _this.target = new three.Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\n\n      _this.minDistance = 0;\n      _this.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\n\n      _this.minZoom = 0;\n      _this.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\n      // Range is 0 to Math.PI radians.\n\n      _this.minPolarAngle = 0; // radians\n\n      _this.maxPolarAngle = Math.PI; // radians\n      // How far you can orbit horizontally, upper and lower limits.\n      // If set, must be a sub-interval of the interval [ - Math.PI, Math.PI ].\n\n      _this.minAzimuthAngle = -Infinity; // radians\n\n      _this.maxAzimuthAngle = Infinity; // radians\n      // Set to true to enable damping (inertia)\n      // If damping is enabled, you must call controls.update() in your animation loop\n\n      _this.enableDamping = false;\n      _this.dampingFactor = 0.25; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n      // Set to false to disable zooming\n\n      _this.enableZoom = true;\n      _this.zoomSpeed = 1.0; // Set to false to disable rotating\n\n      _this.enableRotate = true;\n      _this.rotateSpeed = 1.0; // Set to false to disable panning\n\n      _this.enablePan = true;\n      _this.keyPanSpeed = 7.0; // pixels moved per arrow key push\n      // Set to true to automatically rotate around the target\n      // If auto-rotate is enabled, you must call controls.update() in your animation loop\n\n      _this.autoRotate = false;\n      _this.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n      // Set to false to disable use of the keys\n\n      _this.enableKeys = true; // The four arrow keys\n\n      _this.keys = {\n        LEFT: 37,\n        UP: 38,\n        RIGHT: 39,\n        BOTTOM: 40\n      }; // Mouse buttons\n\n      _this.mouseButtons = {\n        ORBIT: three.MOUSE.LEFT,\n        ZOOM: three.MOUSE.MIDDLE,\n        PAN: three.MOUSE.RIGHT\n      }; // for reset\n\n      _this.target0 = _this.target.clone();\n      _this.position0 = _this.object.position.clone();\n      _this.zoom0 = _this.object.zoom; //\n      // public methods\n      //\n\n      _this.getPolarAngle = function () {\n        return spherical.phi;\n      };\n\n      _this.getAzimuthalAngle = function () {\n        return spherical.theta;\n      };\n\n      _this.reset = function () {\n        scope.target.copy(scope.target0);\n        scope.object.position.copy(scope.position0);\n        scope.object.zoom = scope.zoom0;\n        scope.object.updateProjectionMatrix();\n        scope.dispatchEvent(changeEvent);\n        scope.update();\n        state = STATE.NONE;\n      }; // this method is exposed, but perhaps it would be better if we can make it private...\n\n\n      _this.update = function () {\n        var offset = new three.Vector3(); // so camera.up is the orbit axis\n\n        var quat = new three.Quaternion().setFromUnitVectors(object.up, new three.Vector3(0, 1, 0));\n        var quatInverse = quat.clone().inverse();\n        var lastPosition = new three.Vector3();\n        var lastQuaternion = new three.Quaternion();\n        return function update() {\n          var position = scope.object.position;\n          offset.copy(position).sub(scope.target); // rotate offset to \"y-axis-is-up\" space\n\n          offset.applyQuaternion(quat); // angle from z-axis around y-axis\n\n          spherical.setFromVector3(offset);\n\n          if (scope.autoRotate && state === STATE.NONE) {\n            rotateLeft(getAutoRotationAngle());\n          }\n\n          spherical.theta += sphericalDelta.theta;\n          spherical.phi += sphericalDelta.phi; // restrict theta to be between desired limits\n\n          spherical.theta = Math.max(scope.minAzimuthAngle, Math.min(scope.maxAzimuthAngle, spherical.theta)); // restrict phi to be between desired limits\n\n          spherical.phi = Math.max(scope.minPolarAngle, Math.min(scope.maxPolarAngle, spherical.phi));\n          spherical.makeSafe();\n          spherical.radius *= scale; // restrict radius to be between desired limits\n\n          spherical.radius = Math.max(scope.minDistance, Math.min(scope.maxDistance, spherical.radius)); // move target to panned location\n\n          scope.target.add(panOffset);\n          offset.setFromSpherical(spherical); // rotate offset back to \"camera-up-vector-is-up\" space\n\n          offset.applyQuaternion(quatInverse);\n          position.copy(scope.target).add(offset);\n          scope.object.lookAt(scope.target);\n\n          if (scope.enableDamping === true) {\n            sphericalDelta.theta *= 1 - scope.dampingFactor;\n            sphericalDelta.phi *= 1 - scope.dampingFactor;\n          } else {\n            sphericalDelta.set(0, 0, 0);\n          }\n\n          scale = 1;\n          panOffset.set(0, 0, 0); // update condition is:\n          // min(camera displacement, camera rotation in radians)^2 > EPS\n          // using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n          if (zoomChanged || lastPosition.distanceToSquared(scope.object.position) > EPS || 8 * (1 - lastQuaternion.dot(scope.object.quaternion)) > EPS) {\n            scope.dispatchEvent(changeEvent);\n            lastPosition.copy(scope.object.position);\n            lastQuaternion.copy(scope.object.quaternion);\n            zoomChanged = false;\n            return true;\n          }\n\n          return false;\n        };\n      }();\n\n      _this.dispose = function () {\n        scope.domElement.removeEventListener('contextmenu', onContextMenu, false);\n        scope.domElement.removeEventListener('mousedown', onMouseDown, false);\n        scope.domElement.removeEventListener('wheel', onMouseWheel, false);\n        scope.domElement.removeEventListener('touchstart', onTouchStart, false);\n        scope.domElement.removeEventListener('touchend', onTouchEnd, false);\n        scope.domElement.removeEventListener('touchmove', onTouchMove, false);\n        document.removeEventListener('mousemove', onMouseMove, false);\n        document.removeEventListener('mouseup', onMouseUp, false);\n        window.removeEventListener('keydown', onKeyDown, false); // scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n      }; //\n      // internals\n      //\n\n\n      var scope = _assertThisInitialized(_assertThisInitialized(_this));\n\n      var changeEvent = {\n        type: 'change'\n      };\n      var startEvent = {\n        type: 'start'\n      };\n      var endEvent = {\n        type: 'end'\n      };\n      var STATE = {\n        NONE: -1,\n        ROTATE: 0,\n        DOLLY: 1,\n        PAN: 2,\n        TOUCH_ROTATE: 3,\n        TOUCH_DOLLY: 4,\n        TOUCH_PAN: 5\n      };\n      var state = STATE.NONE;\n      var EPS = 0.000001; // current position in spherical coordinates\n\n      var spherical = new three.Spherical();\n      var sphericalDelta = new three.Spherical();\n      var scale = 1;\n      var panOffset = new three.Vector3();\n      var zoomChanged = false;\n      var rotateStart = new three.Vector2();\n      var rotateEnd = new three.Vector2();\n      var rotateDelta = new three.Vector2();\n      var panStart = new three.Vector2();\n      var panEnd = new three.Vector2();\n      var panDelta = new three.Vector2();\n      var dollyStart = new three.Vector2();\n      var dollyEnd = new three.Vector2();\n      var dollyDelta = new three.Vector2();\n\n      function getAutoRotationAngle() {\n        return 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n      }\n\n      function getZoomScale() {\n        return Math.pow(0.95, scope.zoomSpeed);\n      }\n\n      function rotateLeft(angle) {\n        sphericalDelta.theta -= angle;\n      }\n\n      function rotateUp(angle) {\n        sphericalDelta.phi -= angle;\n      }\n\n      var panLeft = function () {\n        var v = new three.Vector3();\n        return function panLeft(distance, objectMatrix) {\n          v.setFromMatrixColumn(objectMatrix, 0); // get X column of objectMatrix\n\n          v.multiplyScalar(-distance);\n          panOffset.add(v);\n        };\n      }();\n\n      var panUp = function () {\n        var v = new three.Vector3();\n        return function panUp(distance, objectMatrix) {\n          v.setFromMatrixColumn(objectMatrix, 1); // get Y column of objectMatrix\n\n          v.multiplyScalar(distance);\n          panOffset.add(v);\n        };\n      }(); // deltaX and deltaY are in pixels; right and down are positive\n\n\n      var pan = function () {\n        var offset = new three.Vector3();\n        return function pan(deltaX, deltaY) {\n          var element = scope.domElement === document ? scope.domElement.body : scope.domElement;\n\n          if (Object.getPrototypeOf(scope.object).isPerspectiveCamera) {\n            // perspective\n            var position = scope.object.position;\n            offset.copy(position).sub(scope.target);\n            var targetDistance = offset.length(); // half of the fov is center to top of screen\n\n            targetDistance *= Math.tan(scope.object.fov / 2 * Math.PI / 180.0); // we actually don't use screenWidth, since perspective camera is fixed to screen height\n\n            panLeft(2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix);\n            panUp(2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix);\n          } else if (Object.getPrototypeOf(scope.object).isOrthographicCamera) {\n            // orthographic\n            panLeft(deltaX * (scope.object.right - scope.object.left) / scope.object.zoom / element.clientWidth, scope.object.matrix);\n            panUp(deltaY * (scope.object.top - scope.object.bottom) / scope.object.zoom / element.clientHeight, scope.object.matrix);\n          } else {\n            // camera neither orthographic nor perspective\n            console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.');\n            scope.enablePan = false;\n          }\n        };\n      }();\n\n      function dollyIn(dollyScale) {\n        if (Object.getPrototypeOf(scope.object).isPerspectiveCamera) {\n          scale /= dollyScale;\n        } else if (Object.getPrototypeOf(scope.object).isOrthographicCamera) {\n          scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom * dollyScale));\n          scope.object.updateProjectionMatrix();\n          zoomChanged = true;\n        } else {\n          console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n          scope.enableZoom = false;\n        }\n      }\n\n      function dollyOut(dollyScale) {\n        if (Object.getPrototypeOf(scope.object).isPerspectiveCamera) {\n          scale *= dollyScale;\n        } else if (Object.getPrototypeOf(scope.object).isOrthographicCamera) {\n          scope.object.zoom = Math.max(scope.minZoom, Math.min(scope.maxZoom, scope.object.zoom / dollyScale));\n          scope.object.updateProjectionMatrix();\n          zoomChanged = true;\n        } else {\n          console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.');\n          scope.enableZoom = false;\n        }\n      } //\n      // event callbacks - update the object state\n      //\n\n\n      function handleMouseDownRotate(event) {\n        // console.log( 'handleMouseDownRotate' );\n        rotateStart.set(event.clientX, event.clientY);\n      }\n\n      function handleMouseDownDolly(event) {\n        // console.log( 'handleMouseDownDolly' );\n        dollyStart.set(event.clientX, event.clientY);\n      }\n\n      function handleMouseDownPan(event) {\n        // console.log( 'handleMouseDownPan' );\n        panStart.set(event.clientX, event.clientY);\n      }\n\n      function handleMouseMoveRotate(event) {\n        // console.log( 'handleMouseMoveRotate' );\n        rotateEnd.set(event.clientX, event.clientY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n        var element = scope.domElement === document ? scope.domElement.body : scope.domElement; // rotating across whole screen goes 360 degrees around\n\n        rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed); // rotating up and down along whole screen attempts to go 360, but limited to 180\n\n        rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n        rotateStart.copy(rotateEnd);\n        scope.update();\n      }\n\n      function handleMouseMoveDolly(event) {\n        // console.log( 'handleMouseMoveDolly' );\n        dollyEnd.set(event.clientX, event.clientY);\n        dollyDelta.subVectors(dollyEnd, dollyStart);\n\n        if (dollyDelta.y > 0) {\n          dollyIn(getZoomScale());\n        } else if (dollyDelta.y < 0) {\n          dollyOut(getZoomScale());\n        }\n\n        dollyStart.copy(dollyEnd);\n        scope.update();\n      }\n\n      function handleMouseMovePan(event) {\n        // console.log( 'handleMouseMovePan' );\n        panEnd.set(event.clientX, event.clientY);\n        panDelta.subVectors(panEnd, panStart);\n        pan(panDelta.x, panDelta.y);\n        panStart.copy(panEnd);\n        scope.update();\n      }\n\n      function handleMouseWheel(event) {\n        // console.log( 'handleMouseWheel' );\n        if (event.deltaY < 0) {\n          dollyOut(getZoomScale());\n        } else if (event.deltaY > 0) {\n          dollyIn(getZoomScale());\n        }\n\n        scope.update();\n      }\n\n      function handleKeyDown(event) {\n        // console.log( 'handleKeyDown' );\n        switch (event.keyCode) {\n          case scope.keys.UP:\n            pan(0, scope.keyPanSpeed);\n            scope.update();\n            break;\n\n          case scope.keys.BOTTOM:\n            pan(0, -scope.keyPanSpeed);\n            scope.update();\n            break;\n\n          case scope.keys.LEFT:\n            pan(scope.keyPanSpeed, 0);\n            scope.update();\n            break;\n\n          case scope.keys.RIGHT:\n            pan(-scope.keyPanSpeed, 0);\n            scope.update();\n            break;\n        }\n      }\n\n      function handleTouchStartRotate(event) {\n        // console.log( 'handleTouchStartRotate' );\n        rotateStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      }\n\n      function handleTouchStartDolly(event) {\n        // console.log( 'handleTouchStartDolly' );\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        dollyStart.set(0, distance);\n      }\n\n      function handleTouchStartPan(event) {\n        // console.log( 'handleTouchStartPan' );\n        panStart.set(event.touches[0].pageX, event.touches[0].pageY);\n      }\n\n      function handleTouchMoveRotate(event) {\n        // console.log( 'handleTouchMoveRotate' );\n        rotateEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        rotateDelta.subVectors(rotateEnd, rotateStart);\n        var element = scope.domElement === document ? scope.domElement.body : scope.domElement; // rotating across whole screen goes 360 degrees around\n\n        rotateLeft(2 * Math.PI * rotateDelta.x / element.clientWidth * scope.rotateSpeed); // rotating up and down along whole screen attempts to go 360, but limited to 180\n\n        rotateUp(2 * Math.PI * rotateDelta.y / element.clientHeight * scope.rotateSpeed);\n        rotateStart.copy(rotateEnd);\n        scope.update();\n      }\n\n      function handleTouchMoveDolly(event) {\n        // console.log( 'handleTouchMoveDolly' );\n        var dx = event.touches[0].pageX - event.touches[1].pageX;\n        var dy = event.touches[0].pageY - event.touches[1].pageY;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        dollyEnd.set(0, distance);\n        dollyDelta.subVectors(dollyEnd, dollyStart);\n\n        if (dollyDelta.y > 0) {\n          dollyOut(getZoomScale());\n        } else if (dollyDelta.y < 0) {\n          dollyIn(getZoomScale());\n        }\n\n        dollyStart.copy(dollyEnd);\n        scope.update();\n      }\n\n      function handleTouchMovePan(event) {\n        // console.log( 'handleTouchMovePan' );\n        panEnd.set(event.touches[0].pageX, event.touches[0].pageY);\n        panDelta.subVectors(panEnd, panStart);\n        pan(panDelta.x, panDelta.y);\n        panStart.copy(panEnd);\n        scope.update();\n      } //\n      // event handlers - FSM: listen for events and reset state\n      //\n\n\n      function onMouseDown(event) {\n        if (scope.enabled === false) return;\n        event.preventDefault();\n\n        if (event.button === scope.mouseButtons.ORBIT) {\n          if (scope.enableRotate === false) return;\n          handleMouseDownRotate(event);\n          state = STATE.ROTATE;\n        } else if (event.button === scope.mouseButtons.ZOOM) {\n          if (scope.enableZoom === false) return;\n          handleMouseDownDolly(event);\n          state = STATE.DOLLY;\n        } else if (event.button === scope.mouseButtons.PAN) {\n          if (scope.enablePan === false) return;\n          handleMouseDownPan(event);\n          state = STATE.PAN;\n        }\n\n        if (state !== STATE.NONE) {\n          document.addEventListener('mousemove', onMouseMove, false);\n          document.addEventListener('mouseup', onMouseUp, false);\n          scope.dispatchEvent(startEvent);\n        }\n      }\n\n      function onMouseMove(event) {\n        if (scope.enabled === false) return;\n        event.preventDefault();\n\n        if (state === STATE.ROTATE) {\n          if (scope.enableRotate === false) return;\n          handleMouseMoveRotate(event);\n        } else if (state === STATE.DOLLY) {\n          if (scope.enableZoom === false) return;\n          handleMouseMoveDolly(event);\n        } else if (state === STATE.PAN) {\n          if (scope.enablePan === false) return;\n          handleMouseMovePan(event);\n        }\n      }\n\n      function onMouseUp(event) {\n        if (scope.enabled === false) return;\n        document.removeEventListener('mousemove', onMouseMove, false);\n        document.removeEventListener('mouseup', onMouseUp, false);\n        scope.dispatchEvent(endEvent);\n        state = STATE.NONE;\n      }\n\n      function onMouseWheel(event) {\n        if (scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE && state !== STATE.ROTATE) return;\n        event.preventDefault();\n        event.stopPropagation();\n        handleMouseWheel(event);\n        scope.dispatchEvent(startEvent); // not sure why these are here...\n\n        scope.dispatchEvent(endEvent);\n      }\n\n      function onKeyDown(event) {\n        if (scope.enabled === false || scope.enableKeys === false || scope.enablePan === false) return;\n        handleKeyDown(event);\n      }\n\n      function onTouchStart(event) {\n        if (scope.enabled === false) return;\n\n        switch (event.touches.length) {\n          case 1:\n            // one-fingered touch: rotate\n            if (scope.enableRotate === false) return;\n            handleTouchStartRotate(event);\n            state = STATE.TOUCH_ROTATE;\n            break;\n\n          case 2:\n            // two-fingered touch: dolly\n            if (scope.enableZoom === false) return;\n            handleTouchStartDolly(event);\n            state = STATE.TOUCH_DOLLY;\n            break;\n\n          case 3:\n            // three-fingered touch: pan\n            if (scope.enablePan === false) return;\n            handleTouchStartPan(event);\n            state = STATE.TOUCH_PAN;\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n\n        if (state !== STATE.NONE) {\n          scope.dispatchEvent(startEvent);\n        }\n      }\n\n      function onTouchMove(event) {\n        if (scope.enabled === false) return;\n        event.preventDefault();\n        event.stopPropagation();\n\n        switch (event.touches.length) {\n          case 1:\n            // one-fingered touch: rotate\n            if (scope.enableRotate === false) return;\n            if (state !== STATE.TOUCH_ROTATE) return; // is this needed?...\n\n            handleTouchMoveRotate(event);\n            break;\n\n          case 2:\n            // two-fingered touch: dolly\n            if (scope.enableZoom === false) return;\n            if (state !== STATE.TOUCH_DOLLY) return; // is this needed?...\n\n            handleTouchMoveDolly(event);\n            break;\n\n          case 3:\n            // three-fingered touch: pan\n            if (scope.enablePan === false) return;\n            if (state !== STATE.TOUCH_PAN) return; // is this needed?...\n\n            handleTouchMovePan(event);\n            break;\n\n          default:\n            state = STATE.NONE;\n        }\n      }\n\n      function onTouchEnd(event) {\n        if (scope.enabled === false) return;\n        scope.dispatchEvent(endEvent);\n        state = STATE.NONE;\n      }\n\n      function onContextMenu(event) {\n        event.preventDefault();\n      } //\n\n\n      scope.domElement.addEventListener('contextmenu', onContextMenu, false);\n      scope.domElement.addEventListener('mousedown', onMouseDown, false);\n      scope.domElement.addEventListener('wheel', onMouseWheel, false);\n      scope.domElement.addEventListener('touchstart', onTouchStart, false);\n      scope.domElement.addEventListener('touchend', onTouchEnd, false);\n      scope.domElement.addEventListener('touchmove', onTouchMove, false);\n      window.addEventListener('keydown', onKeyDown, false); // force an update at start\n\n      _this.update();\n\n      return _this;\n    }\n\n    _createClass(OrbitControls, [{\n      key: \"center\",\n      get: function get() {\n        console.warn('OrbitControls: .center has been renamed to .target');\n        return this.target;\n      } // backward compatibility\n\n    }, {\n      key: \"noZoom\",\n      get: function get() {\n        console.warn('OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n        return !this.enableZoom;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.');\n        this.enableZoom = !value;\n      }\n    }, {\n      key: \"noRotate\",\n      get: function get() {\n        console.warn('OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n        return !this.enableRotate;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.');\n        this.enableRotate = !value;\n      }\n    }, {\n      key: \"noPan\",\n      get: function get() {\n        console.warn('OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n        return !this.enablePan;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noPan has been deprecated. Use .enablePan instead.');\n        this.enablePan = !value;\n      }\n    }, {\n      key: \"noKeys\",\n      get: function get() {\n        console.warn('OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n        return !this.enableKeys;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.');\n        this.enableKeys = !value;\n      }\n    }, {\n      key: \"staticMoving\",\n      get: function get() {\n        console.warn('OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n        return !this.enableDamping;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.');\n        this.enableDamping = !value;\n      }\n    }, {\n      key: \"dynamicDampingFactor\",\n      get: function get() {\n        console.warn('OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n        return this.dampingFactor;\n      },\n      set: function set(value) {\n        console.warn('OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.');\n        this.dampingFactor = value;\n      }\n    }]);\n\n    return OrbitControls;\n  }(three.EventDispatcher);\n\n  return OrbitControls;\n\n})));\n","import React from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport Icon from './Icon';\r\n\r\nexport default function CustomRadio(props) {\r\n  let iconClasses = [];\r\n  if (props.iconClasses !== undefined) {\r\n    iconClasses.push(...props.iconClasses);\r\n  }\r\n\r\n  return (\r\n    <div className=\"custom_radio_container\">\r\n      <input id={'custom_radio_' + props.idWord}\r\n        className=\"custom_radio\"\r\n        name={props.groupWord + '_radio_group'}\r\n        type=\"radio\"\r\n        defaultChecked={props.defaultChk} />\r\n      <label className=\"custom_radio_lbl icon_small\"\r\n        title={props.titleWord}\r\n        htmlFor={'custom_radio_' + props.idWord} />\r\n      <Icon name={props.iconWord} classes={[...iconClasses]} />\r\n    </div>\r\n  )\r\n}\r\n\r\nCustomRadio.propTypes = {\r\n  idWord: PropTypes.string.isRequired,\r\n  iconWord: PropTypes.string.isRequired,\r\n  groupWord: PropTypes.string.isRequired,\r\n  iconClasses: PropTypes.arrayOf(PropTypes.string),\r\n  titleWord: PropTypes.string.isRequired,\r\n  defaultChk: PropTypes.bool.isRequired\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types';\r\nimport Icon from './Icon';\r\n\r\nexport default function CustomChk(props) {\r\n  let iconClasses = [];\r\n  let customChkClasses = ['custom_chk_container', 'btn'];\r\n  if (props.iconWordB !== undefined) {\r\n    customChkClasses.push('dual_icon');\r\n    iconClasses.push('perma_active');\r\n  } else customChkClasses.push('single_icon');\r\n  if (props.iconClasses !== undefined) iconClasses.push(...props.iconClasses);\r\n\r\n  return (\r\n    <div className={customChkClasses.join(' ')}>\r\n      <input id={'custom_chk_' + props.idWord}\r\n        className=\"custom_chk\"\r\n        type=\"checkbox\"\r\n        defaultChecked={props.defaultChk} />\r\n      <label className=\"custom_chk_lbl\"\r\n        title={props.titleWord}\r\n        htmlFor={'custom_chk_' + props.idWord} />\r\n      <Icon name={props.iconWordA} classes={[...iconClasses]} />\r\n      {(props.iconWordB !== undefined) ?\r\n        (<Icon name={props.iconWordB} classes={[...iconClasses]} />) : null}\r\n    </div>\r\n  )\r\n}\r\n\r\nCustomChk.propTypes = {\r\n  idWord: PropTypes.string.isRequired,\r\n  iconWordA: PropTypes.string.isRequired,\r\n  iconWordB: PropTypes.string,\r\n  iconClasses: PropTypes.arrayOf(PropTypes.string),\r\n  titleWord: PropTypes.string.isRequired,\r\n  defaultChk: PropTypes.bool.isRequired\r\n}\r\n","import {\r\n  TextureLoader, sRGBEncoding, SphereBufferGeometry, Math as THREE_MATH,\r\n  AmbientLight, DirectionalLight, Fog, Mesh, Euler, MeshPhongMaterial,\r\n  Color, Matrix4, CanvasTexture, DoubleSide\r\n} from 'three';\r\nimport SCENE, { Z_OFF, setInitDone, SPH_RAD, RES } from './threeStuffUtils';\r\nimport { suc, dbg } from './customConsole';\r\n\r\nconst merToEqrWorker = new Worker('mercatorToEquirectangular.js');\r\nconst URL = {\r\n  base: 'https://tile.openweathermap.org/map/',\r\n  last1: '.png?appid=b280c897878592322aafe56701248929',\r\n  last2: '.png?appid=cdd659df7dc048884575b9451ddf1330'\r\n};\r\nconst MAP = ['clouds_new', 'precipitation_new', 'pressure_new', 'wind_new', 'temp_new'];\r\nconst SPH_SUB_DIV = 64; // sphere sub divisions\r\nconst SPH_SCALE = 1.006; // for atmosphere and weather\r\nconst T = 2; // tiles by side (total tiles = T * T)\r\nconst T_SIZE = RES / T;\r\nexport const LIGHT_ON = 0.78;\r\nexport const LIGHT_OFF = 0.015;\r\nconst BASE_SPH_GEO = new SphereBufferGeometry(SPH_RAD, SPH_SUB_DIV, SPH_SUB_DIV);\r\nBASE_SPH_GEO.rotateY(THREE_MATH.degToRad(-90)); // horizontal rotation offset correction\r\n\r\nexport const AMB = new AmbientLight(0xffffff, LIGHT_OFF);\r\nexport const SUN = new DirectionalLight(0xffffff, LIGHT_ON);\r\nexport const WEATHER_CTX_MAT = [ // context, material\r\n  [undefined, undefined],\r\n  [undefined, undefined],\r\n  [undefined, undefined],\r\n  [undefined, undefined],\r\n  [undefined, undefined]\r\n];\r\n\r\nexport async function init() {\r\n  const TEXTURE = new TextureLoader().load('/this.weather/images/texture-512.png');\r\n  const SPECULAR = new TextureLoader().load('/this.weather/images/spec-512.png');\r\n  const BUMP = new TextureLoader().load('/this.weather/images/bump-512.jpg');\r\n  TEXTURE.encoding = sRGBEncoding;\r\n  SPECULAR.encoding = sRGBEncoding;\r\n  BUMP.encoding = sRGBEncoding;\r\n  SCENE.fog = new Fog(0x74c0ff, Z_OFF - SPH_RAD * 0.82, Z_OFF);\r\n  setSunPosition(SUN);\r\n\r\n  ////////////////////////////////\r\n  // MODELS\r\n  ////////////////////////////////\r\n  const PHYS = new Mesh(); // physic earth globe\r\n  PHYS.geometry = BASE_SPH_GEO;\r\n  PHYS.material = new MeshPhongMaterial({\r\n    map: TEXTURE,\r\n    specularMap: SPECULAR,\r\n    specular: new Color(0x1a1a1a),\r\n    shininess: 55.0,\r\n    bumpMap: BUMP,\r\n    bumpScale: 0.008,\r\n  });\r\n  PHYS.matrixAutoUpdate = false;\r\n  //\r\n  for (let i = 0; i < 5; i++) {\r\n    WEATHER_CTX_MAT[i][0] = document.getElementById('weather_map_' + i).getContext('2d');\r\n    WEATHER_CTX_MAT[i][1] = new MeshPhongMaterial();\r\n    const AUX = new CanvasTexture(WEATHER_CTX_MAT[i][0].canvas);\r\n    AUX.encoding = sRGBEncoding;\r\n    WEATHER_CTX_MAT[i][1].map = AUX;\r\n    WEATHER_CTX_MAT[i][1].shininess = 0.0;\r\n    WEATHER_CTX_MAT[i][1].transparent = true;\r\n    const WEATHER = new Mesh(BASE_SPH_GEO, WEATHER_CTX_MAT[i][1]); // wether map\r\n    WEATHER.layers.set(i + 1);\r\n    WEATHER.scale.multiplyScalar(SPH_SCALE);\r\n    WEATHER.matrixAutoUpdate = false;\r\n    AMB.layers.enable(i + 1);\r\n    SUN.layers.enable(i + 1);\r\n    SCENE.add(WEATHER);\r\n  }\r\n  //\r\n  const ATMO = new Mesh(); // atmosphere\r\n  ATMO.geometry = BASE_SPH_GEO;\r\n  ATMO.material = new MeshPhongMaterial({\r\n    color: 0xffffff,\r\n    side: DoubleSide,\r\n    transparent: true,\r\n    opacity: 0.05,\r\n    shininess: 0.0,\r\n  });\r\n  ATMO.scale.multiplyScalar(SPH_SCALE * .9);\r\n  ATMO.matrixAutoUpdate = false;\r\n\r\n  ////////////////////////////////\r\n  // ALL TOGHETHER\r\n  ////////////////////////////////\r\n  SCENE.add(PHYS, ATMO, AMB, SUN);\r\n\r\n  setInterval(updateSunPosition, 180000); // 3m\r\n  setInitDone();\r\n}\r\n\r\nfunction updateSunPosition() {\r\n  setSunPosition(SUN);\r\n}\r\n\r\nfunction setSunPosition(sun) {\r\n  const HH = new Date().getUTCHours();\r\n  const MM = new Date().getUTCMonth();\r\n  const MATRIX = new Matrix4();\r\n  let rotY = 0;\r\n  let rotX = 0;\r\n  // X axis 'inclination' (for months)\r\n  if (MM <= 6) rotX = -(8 * MM) + 24; // y = -8x+24\r\n  else rotX = 8 * MM - 72; // y = 8x-72\r\n  // Y axis rotation (for hours)\r\n  rotY = 180 - (HH / 24) * 360;\r\n  MATRIX.makeRotationFromEuler(new Euler(\r\n    THREE_MATH.degToRad(rotX),\r\n    THREE_MATH.degToRad(rotY),\r\n    0, 'YXZ'));\r\n  sun.position.set(0, 0, Z_OFF * 10); // reset the position with just a Z axis displacement\r\n  sun.position.applyMatrix4(MATRIX); // Rotation\r\n  sun.lookAt(0, 0, 0);\r\n}\r\n\r\n/**\r\n * Launch the process of downloading mercator projection (tiles)\r\n * and convert them into a single equirectangular projection (map)\r\n * @param {Number} i Weather map option (index)\r\n */\r\nexport function createWeatherMap(i) {\r\n  const MERCATOR_CANVAS = document.createElement('canvas');\r\n  // 512x512\r\n  MERCATOR_CANVAS.width = RES;\r\n  MERCATOR_CANVAS.height = RES;\r\n  const MERCATOR_CTX = MERCATOR_CANVAS.getContext('2d');\r\n  let cont = 0;\r\n  // merc. proj. images (2x2) to generate a single eqr. proj.\r\n  let X00 = new Image(T_SIZE, T_SIZE);\r\n  let X10 = new Image(T_SIZE, T_SIZE);\r\n  let X01 = new Image(T_SIZE, T_SIZE);\r\n  let X11 = new Image(T_SIZE, T_SIZE);\r\n  X00.crossOrigin = 'Anonymous';\r\n  X10.crossOrigin = 'Anonymous';\r\n  X01.crossOrigin = 'Anonymous';\r\n  X11.crossOrigin = 'Anonymous';\r\n  X00.src = URL.base + MAP[i] + '/1/0/0' + URL.last1;\r\n  X10.src = URL.base + MAP[i] + '/1/1/0' + URL.last1;\r\n  X01.src = URL.base + MAP[i] + '/1/0/1' + URL.last2;\r\n  X11.src = URL.base + MAP[i] + '/1/1/1' + URL.last2;\r\n  X00.onload = async () => await drawMapTiles(X00, T_SIZE * 0, T_SIZE * 0);\r\n  X10.onload = async () => await drawMapTiles(X10, T_SIZE * 1, T_SIZE * 0);\r\n  X01.onload = async () => await drawMapTiles(X01, T_SIZE * 0, T_SIZE * 1);\r\n  X11.onload = async () => await drawMapTiles(X11, T_SIZE * 1, T_SIZE * 1);\r\n  async function drawMapTiles(img, x, y) {\r\n    MERCATOR_CTX.drawImage(img, x, y);\r\n    const T_DATA = MERCATOR_CTX.getImageData(x, y, T_SIZE, T_SIZE);\r\n    const L = T_DATA.data.length;\r\n    // Alpha and color adjust\r\n    if (i === 0) { // Clouds\r\n      for (let i = 0; i < L; i += 4) {\r\n        let A = T_DATA.data[i + 3];\r\n        A = (A - (255 * 0.6)) / 0.4; // range displacement and scale\r\n        T_DATA.data[i + 0] = 255; // R\r\n        T_DATA.data[i + 1] = 255; // G\r\n        T_DATA.data[i + 2] = 255; // B\r\n        T_DATA.data[i + 3] = A * 1.8;\r\n      }\r\n    } else if (i === 1) { // Precipitation\r\n      for (let i = 0; i < L; i += 4) {\r\n        T_DATA.data[i + 0] = 255; // R\r\n        T_DATA.data[i + 1] = 255; // G\r\n        T_DATA.data[i + 2] = 255; // B\r\n        T_DATA.data[i + 3] *= 1.8;\r\n      }\r\n    } else if (i === 2) { // Pressure\r\n      for (let i = 0; i < L; i += 4) {\r\n        T_DATA.data[i + 3] *= 1.5;\r\n      }\r\n    } else if (i === 3) { // Wind\r\n      for (let i = 0; i < L; i += 4) {\r\n        const R = T_DATA.data[i + 0];\r\n        const G = T_DATA.data[i + 1];\r\n        //const B = TILE.data[i + 2];\r\n        T_DATA.data[i + 0] = 255 - G * 0.75; // R\r\n        T_DATA.data[i + 1] = 255 - R * 0.75; // G\r\n        T_DATA.data[i + 2] = 255 - 255; // B\r\n        T_DATA.data[i + 3] *= 1.5;\r\n      }\r\n    } else if (i === 4) { // Temp\r\n      for (let i = 0; i < L; i += 4) {\r\n        T_DATA.data[i + 3] *= 1.8;\r\n      }\r\n    }\r\n    MERCATOR_CTX.putImageData(T_DATA, x, y);\r\n    cont++;\r\n    if (cont === T * T) { // When all tiles are done: convert Mer. to Eqr.\r\n      for (let y = 0; y < RES; y++) { // Take each line to get his new position\r\n        const LINE = MERCATOR_CTX.getImageData(0, y, RES, 1);\r\n        merToEqrWorker.postMessage([LINE, y, RES, RES / 2, i]);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nlet messageCount = 0;\r\nmerToEqrWorker.onmessage = (e) => {\r\n  const I = e.data[0];\r\n  e.data[1].forEach(async merY => {\r\n    await WEATHER_CTX_MAT[I][0].putImageData(merY.content, 0, merY.newY);\r\n  });\r\n  /* for (let i = 0; i < 512; i++) {\r\n    weatherPack[I][0].putImageData(e.data[1][i].content, 0, e.data[1][i].newY);\r\n  } */\r\n  dbg('Mapa equirectangular \"' + MAP[I] + '\": Creado...');\r\n  WEATHER_CTX_MAT[I][1].map.needsUpdate = true;\r\n  // Put data on map master canvas (from first/default map)\r\n  if (I === 0)\r\n    document.getElementById('map_canvas')\r\n      .getContext('2d')\r\n      .putImageData(WEATHER_CTX_MAT[0][0].getImageData(0, 0, RES, RES * .5), 0, 0);\r\n  messageCount++;\r\n  if (messageCount === 5) suc('Mapas equirectangulares: Finalizados (5 de 5)');\r\n}\r\n\r\n/*\r\nLAYERS | NAME\r\n---\r\n0 phisic globe\r\n1 clouds\r\n2 pressipitation\r\n3 pressure\r\n4 wind\r\n5 temperature\r\n*/\r\n","import React, { Component } from 'react'\r\nimport { Vector3, Raycaster, PerspectiveCamera, WebGLRenderer, Matrix4, Euler } from 'three';\r\nimport OrbitControls from 'orbit-controls-es6';\r\nimport CustomRadio from './CustomRadio';\r\nimport CustomChk from './CustomChk';\r\nimport { AMB, createWeatherMap, init, SUN, WEATHER_CTX_MAT, LIGHT_ON, LIGHT_OFF } from '../js/threeStuff';\r\nimport SCENE, { NEAR, FAR, Z_OFF, city_labels, initDone, RES } from '../js/threeStuffUtils';\r\n\r\nconst VEC = new Vector3();\r\nconst RAY_CASTER = new Raycaster();\r\nconst MAPS = [\r\n  { id: 0, label: 'Terreno', ref: [''], icon: 'terrain' },\r\n  { id: 1, label: 'Nubosidad', ref: ['0%', '100%'], icon: 'cloud' },\r\n  { id: 2, label: 'Precipitación', ref: ['0mm', '200mm'], icon: 'precipitation' },\r\n  { id: 3, label: 'Presión', ref: ['950hPa', '1070hPa'], icon: 'tachometer' },\r\n  { id: 4, label: 'Viento', ref: ['0m/s', '200m/s'], icon: 'wind' },\r\n  { id: 5, label: 'Temperatura', ref: ['-40°C', '0°C', '40°C'], icon: 'thermometer' }\r\n];\r\nconst N_MAPS_TO_LOAD = 6; // 1 to 6\r\nconst DEFAULT_OPTION = 0;\r\nconst SMALL_MEDIA = window.matchMedia('(max-width: 679px)');\r\n\r\nlet camera, renderer, controls;\r\n\r\nexport default class WeatherMaps extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      option: DEFAULT_OPTION,\r\n      label: MAPS[DEFAULT_OPTION].label,\r\n      ref: MAPS[DEFAULT_OPTION].ref,\r\n      showContent: 'inline-block',\r\n      showGlobe: 'flex',\r\n      showMap: 'none'\r\n    }\r\n    this.setGlobe = this.setGlobe.bind(this);\r\n    this.setMap = this.setMap.bind(this);\r\n    this.setWeatherOption = this.setWeatherOption.bind(this);\r\n    this.animateRaf = 0;\r\n    this.labelsRaf = 0;\r\n\r\n    // Globe stuff\r\n    this.animate = this.animate.bind(this);\r\n    this.setCameraPosition = this.setCameraPosition.bind(this);\r\n    this.toggleLights = this.toggleLights.bind(this);\r\n    this.toggleRotation = this.toggleRotation.bind(this);\r\n    this.resetRedererSize = this.resetRedererSize.bind(this);\r\n    //this.resetRendererPixelRatio = this.resetRendererPixelRatio.bind(this);\r\n    this.updateLabels = this.updateLabels.bind(this);\r\n\r\n    // Map stuff\r\n    this.mapCanvas = undefined;\r\n  }\r\n\r\n  async componentDidMount() {\r\n    // most be done only one time\r\n    if (!initDone) {\r\n      // wait for three stuff (globe, weather map, and atmosphere '3D objects')\r\n      await init();\r\n      // launch weather maps requests (2D images from OpenWeatherMaps)\r\n      for (let i = 0; i < N_MAPS_TO_LOAD - 1; i++) createWeatherMap(i);\r\n      // init local three staff\r\n      camera = new PerspectiveCamera(45, RES / RES, NEAR, FAR);\r\n      camera.layers.enable(DEFAULT_OPTION);\r\n      renderer = new WebGLRenderer({\r\n        antialias: true,\r\n        alpha: true,\r\n        powerPreference: 'high-performance',\r\n        stencil: false,\r\n      });\r\n      renderer.setSize(RES, RES);\r\n      renderer.setPixelRatio(2);\r\n      renderer.gammaFactor = 2.2;\r\n      renderer.gammaOutput = true;\r\n      renderer.domElement.id = 'globe_canvas';\r\n      controls = new OrbitControls(camera, renderer.domElement);\r\n      controls.rotateSpeed = 0.3;\r\n      controls.autoRotate = false;\r\n      controls.autoRotateSpeed = 2.0;\r\n      controls.enablePan = false;\r\n      controls.enableZoom = false;\r\n      controls.enableKeys = false;\r\n      controls.minPolarAngle = Math.PI - Math.PI * .90;\r\n      controls.maxPolarAngle = Math.PI * .90;\r\n    }\r\n    // every time it mounts...\r\n    document.getElementById('globe_box').appendChild(renderer.domElement); // add renderer canvas to dom\r\n    //document.getElementById('weather_maps_body').style.overflowX = 'visible';\r\n    this.mapCanvas = document.getElementById('map_canvas'); // identify map canvas\r\n    this.setCameraPosition(0, 0);\r\n    this.resetRedererSize(); // resize renderer based on media queries\r\n    this.animate(); // init three stuff animation loop\r\n    city_labels.forEach(item => item.label = document.getElementById('city_label_' + item.id));\r\n    this.updateLabels(); // init labels updating loop\r\n    //window.addEventListener('resize', this.resetRendererPixelRatio, false); // listen for window resize\r\n    for (let i = 0; i < 6; i++)  // listen to each weather map option\r\n      document.getElementById('custom_radio_' + i).addEventListener('change', () => { this.setWeatherOption(i); });\r\n    // listen to 'toggle buttons' (actually checkbox and radio)\r\n    document.getElementById('custom_radio_globe_radio').addEventListener('change', () => { this.setGlobe(); });\r\n    document.getElementById('custom_radio_map_radio').addEventListener('change', () => { this.setMap(); });\r\n    document.getElementById('custom_chk_rotation_chk').addEventListener('change', e => { this.toggleRotation(e); });\r\n    document.getElementById('custom_chk_day_night_day_chk').addEventListener('change', e => { this.toggleLights(e); });\r\n    // listen for scroll on map to resize 'progress marks'\r\n    document.getElementById('weather_maps_body').addEventListener('scroll', e => {\r\n      const W = SMALL_MEDIA.matches ? 512 : 1024;\r\n      const OFFSET = (SMALL_MEDIA.matches ? 7 : 14) + 1; // margin + border\r\n      const SCROLLABLE = ((W + OFFSET * 2) * .5) + OFFSET; // expected 272 or 542\r\n      const SCROLLED = e.target.scrollLeft / SCROLLABLE;\r\n      document.getElementById('mark_left').style.width = (32 * SCROLLED) + 'px';\r\n      document.getElementById('mark_right').style.width = 32 - (32 * SCROLLED) + 'px';\r\n    });\r\n    SMALL_MEDIA.addListener(this.resetRedererSize);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    // stop all lops\r\n    cancelAnimationFrame(this.animateRaf);\r\n    cancelAnimationFrame(this.labelsRaf);\r\n  }\r\n\r\n  /**\r\n   * Basic\r\n   */\r\n\r\n  setGlobe() {\r\n    document.getElementById('weather_maps_body').style.overflowX = 'visible';\r\n    if (this.state.showGlobe !== 'flex') this.setState({ showMap: 'none', showGlobe: 'flex' });\r\n  }\r\n\r\n  setMap() {\r\n    document.getElementById('weather_maps_body').style.overflowX = 'scroll';\r\n    if (this.state.showMAp !== 'flex') this.setState({ showGlobe: 'none', showMap: 'flex' });\r\n  }\r\n\r\n  setWeatherOption(option) {\r\n    this.setState({\r\n      option: option,\r\n      label: MAPS[option].label,\r\n      ref: MAPS[option].ref\r\n    });\r\n    let i = 1; // layer 0 = globe\r\n    do {\r\n      if (option === MAPS[i].id) camera.layers.enable(i);\r\n      else camera.layers.disable(i);\r\n      i++;\r\n    } while (i < 6);\r\n    if (option === 0) this.mapCanvas.getContext('2d').clearRect(0, 0, RES, RES * .5);\r\n    else this.mapCanvas.getContext('2d').putImageData(\r\n      WEATHER_CTX_MAT[option - 1][0].getImageData(0, 0, RES, RES * .5), 0, 0);\r\n  }\r\n\r\n  /**\r\n   * Globe functionality\r\n   */\r\n\r\n  animate() {\r\n    this.animateRaf = requestAnimationFrame(this.animate);\r\n    controls.update();\r\n    renderer.render(SCENE, camera);\r\n  }\r\n\r\n  setCameraPosition(alpha, theta) {\r\n    let matrix = new Matrix4();\r\n    matrix.makeRotationFromEuler(new Euler(alpha, theta, 0, 'YXZ'));\r\n    camera.position.set(0, 0, Z_OFF).applyMatrix4(matrix);\r\n    camera.lookAt(0, 0, 0);\r\n  }\r\n\r\n  /* resetRendererPixelRatio() {\r\n    const DPR = window.devicePixelRatio || 1;\r\n    if (DPR < 0.5) { renderer.setPixelRatio(0.5); return; }\r\n    if (DPR > 3) { renderer.setPixelRatio(3); return; }\r\n    // renderer.setPixelRatio(window.devicePixelRatio); // Performance in danger :c\r\n  } */\r\n\r\n  toggleLights(e) {\r\n    if (e.target.checked === true) {\r\n      AMB.intensity = LIGHT_ON;\r\n      SUN.intensity = 0.0;\r\n      //scene.fog.color = new THREE.Color(0x686868);\r\n    } else {\r\n      AMB.intensity = LIGHT_OFF;\r\n      SUN.intensity = LIGHT_ON;\r\n      //scene.fog.color = new THREE.Color(0x80bfff);\r\n    }\r\n  }\r\n\r\n  toggleRotation(e) {\r\n    controls.autoRotate = e.target.checked;\r\n  }\r\n\r\n  resetRedererSize() {\r\n    const currentSize = renderer.getSize.x;\r\n    if (SMALL_MEDIA.matches && currentSize !== RES * .5) renderer.setSize(RES * .5, RES * .5);\r\n    else if (!SMALL_MEDIA.matches && currentSize !== RES) renderer.setSize(RES, RES);\r\n  }\r\n\r\n  updateLabels() {\r\n    this.labelsRaf = requestAnimationFrame(this.updateLabels);\r\n    const W = renderer.domElement.clientWidth;\r\n    const H = renderer.domElement.clientHeight;\r\n    // iterate on each label object (THREE & DOM stuff)\r\n    city_labels.forEach(item => {\r\n      let { label, dot, x, y } = item;\r\n      if (this.state.showGlobe === 'flex') { // Move & show/hide label over the globe canvas\r\n        dot.updateWorldMatrix(true, false);\r\n        dot.getWorldPosition(VEC);\r\n        VEC.project(camera);\r\n        RAY_CASTER.setFromCamera(VEC, camera);\r\n        const VEC_X = (VEC.x * .5 + .5) * W;\r\n        const VEC_Y = (VEC.y * -.5 + .5) * H;\r\n        label.style.transform = 'translate(-50%, -50%) translate(' + Math.round(VEC_X) + 'px, ' + Math.round(VEC_Y) + 'px)';\r\n        if (VEC.z > .8) label.style.display = 'none';\r\n        else label.style.display = '';\r\n      } else { // Print labels on map\r\n        label.style.display = '';\r\n        if (!SMALL_MEDIA.matches) { x *= 2; y *= 2; }\r\n        label.style.transform = 'translate(-50%, -50%) translate(' + Math.round(x) + 'px, ' + Math.round(y) + 'px)';\r\n      }\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div id=\"weather_maps_box\">\r\n        <article id=\"weather_maps\">\r\n          <div id=\"weather_maps_header\">\r\n            <h3>\r\n              <em>{this.state.label}</em>\r\n            </h3>\r\n            <CustomRadio\r\n              idWord=\"globe_radio\"\r\n              iconWord=\"globe\"\r\n              groupWord=\"weather_maps\"\r\n              titleWord=\"Globo\"\r\n              defaultChk={true}\r\n              key=\"custom_radio_key_globe_radio\" />\r\n            <CustomRadio\r\n              idWord=\"map_radio\"\r\n              iconWord=\"map\"\r\n              groupWord=\"weather_maps\"\r\n              titleWord=\"Mapa\"\r\n              defaultChk={false}\r\n              key=\"custom_radio_key_map_radio\" />\r\n          </div>\r\n          <hr />\r\n          <div id=\"weather_maps_body\" className=\"dragscroll\">\r\n            <div id=\"globe_box\" style={{ display: this.state.showGlobe }} >\r\n              <div id=\"globe_shadow\"><span></span></div>\r\n              {/* renderer canvas here */}\r\n            </div>\r\n            <div id=\"map_box\" style={{ display: this.state.showMap }} >\r\n              <div id=\"map_canvas_container\">\r\n                <canvas id=\"map_canvas\" width={RES} height={RES * .5} />\r\n              </div>\r\n            </div>\r\n            <div id=\"labels\">\r\n              {city_labels.map(item => (\r\n                <Label\r\n                  id={item.id}\r\n                  cityName={item.cityName}\r\n                  key={'city_label_' + item.id} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div id=\"ref\">\r\n            <div id=\"ref_data\" title=\"Referencia de magnitudes y valores\">\r\n              {MAPS[this.state.option].ref.map(item => (\r\n                <p key={'ref_data_' + item}>{item}</p>\r\n              ))}\r\n            </div>\r\n            <hr />\r\n            <div id=\"ref_gradient_bg\"></div>\r\n            <div className={'ref_gradient ref_gradient_' + MAPS[this.state.option].id}\r\n              title=\"Referencia de colores\">\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div id=\"weather_maps_control\">\r\n            <div id=\"globe_controls\" style={{ display: this.state.showGlobe }} >\r\n              <CustomChk\r\n                idWord=\"rotation_chk\"\r\n                iconWordA=\"rotation_360\"\r\n                titleWord=\"Alternar rotación\"\r\n                defaultChk={false} />\r\n              <CustomChk\r\n                idWord=\"day_night_day_chk\"\r\n                iconWordA=\"day_night\"\r\n                iconWordB=\"day\"\r\n                titleWord=\"Alternar iluminación\"\r\n                defaultChk={false} />\r\n            </div>\r\n            <div id=\"generic_controls\">\r\n              {MAPS.map(option => (\r\n                <CustomRadio\r\n                  idWord={String(option.id)}\r\n                  iconWord={option.icon}\r\n                  groupWord={'map_option'}\r\n                  titleWord={option.label}\r\n                  defaultChk={option.id === 1 ? true : false}\r\n                  key={'custom_radio_key_' + option.id} />\r\n              ))}\r\n            </div>\r\n          </div>\r\n          <div id=\"mark_box\" style={{ display: this.state.showMap }} >\r\n            <div id=\"mark_content\">\r\n              <div id=\"mark_left\"></div>\r\n              <div id=\"mark_right\"></div>\r\n            </div>\r\n          </div>\r\n        </article>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction Label(props) {\r\n  return (\r\n    <div id={'city_label_' + props.id} className={'city_label'} >\r\n      {props.cityName}\r\n    </div>\r\n  )\r\n}"],"sourceRoot":""}